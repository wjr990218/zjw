"use strict";$("header").load("public.html .header1",function(){qwe()});for(var data=JSON.parse(localStorage.data),i=0;i<data.length;i++){var str="<tr order = ".concat(data[i].order,'>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input class = "xuan" type="checkbox" >\n\t\t\t\t\t\t<img src="').concat(data[i].img,'" alt=""></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<p>').concat(data[i].name,"</p>\n\t\t\t\t\t\t<p>条形码：").concat(data[i].order,'</p>\n\t\t\t\t\t\t<p>库存：有库存</p>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td id="money">￥').concat(data[i].price,'</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class="zuo">-</div>\n\t\t\t\t\t\t<div class="num">').concat(data[i].num,'</div>\n\t\t\t\t\t\t<div class="you">+</div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td id ="sum">').concat((data[i].price*data[i].num).toFixed(2),'</td>\n\t\t\t\t\t<td><a id ="del" href="javascript:;">删除</a></td>\n\t\t\t\t</tr>');$("tbody").append(str)}function _num(t){for(var e=0;e<data.length;e++){var a=$(t).parent().parent().attr("order");data[e].order==a&&(data[e].num=$(t).parent().children(".num").html(),$(t).parent().next().html((data[e].price*data[e].num).toFixed(2)))}var n=JSON.parse($Cookie("state"));n.data=data,createCookie("state",JSON.stringify(n),{expires:7}),localStorage.data=JSON.stringify(data)}$(".you").click(function(){var t,e,a,n;$(this).parent().children(".num").html(parseInt($(this).parent().children(".num").html())+1),_num(this),$(this).parent().parent().find(".xuan")[0].checked&&(t=/((\d|\.)+)/,e=Number(t.exec($("#good_num").html())[1]),a=Number(t.exec($("#rmb").html())[1]),n=Number(t.exec($(this).parent().parent().find("#money").html())[1]),$("#good_num").html("已选"+(e+1)+"件商品"),$("#rmb").html("总计应付:<br>￥"+(a+n).toFixed(2)+"元"))}),$(".zuo").click(function(){var t,e,a,n;"1"==$(this).parent().children(".num").html()?$(this).parent().children(".num").html(1):($(this).parent().children(".num").html(parseInt($(this).parent().children(".num").html())-1),_num(this),$(this).parent().parent().find(".xuan")[0].checked&&(t=/((\d|\.)+)/,e=Number(t.exec($("#good_num").html())[1]),a=Number(t.exec($("#rmb").html())[1]),n=Number(t.exec($(this).parent().parent().find("#money").html())[1]),$("#good_num").html("已选"+(e-1)+"件商品"),$("#rmb").html("总计应付:<br>￥"+(a-n).toFixed(2)+"元")))});for(var all=document.querySelectorAll(".all"),xuan=document.querySelectorAll(".xuan"),_loop=function(){var n=!0;all[i].onclick=function(){if(n){for(var t=0,e=0,a=0;a<xuan.length;a++)xuan[a].checked=!0,t+=Number($(".xuan:eq("+a+")").parent().parent().find(".num").html()),e+=Number($(".xuan:eq("+a+")").parent().parent().find("#sum").html());$("#good_num").html("已选"+t+"件商品"),$("#rmb").html("总计应付:￥"+e.toFixed(2)+"元"),n=!1}else{for(a=0;a<xuan.length;a++)xuan[a].checked=!1;n=!0,$("#good_num").html("已选0件商品"),$("#rmb").html("总计应付:<br>￥0.00元")}}},i=0;i<all.length;i++)_loop();function remove(){var t=document.querySelectorAll("#del");for(i=0;i<t.length;i++)t[i].onclick=function(){$(this).parent().parent().remove();for(var t=$(this).parent().parent().attr("order"),e=0;e<data.length;e++)data[e].order==t&&data.splice(e,1);var a=JSON.parse($Cookie("state"));a.data=data,createCookie("state",JSON.stringify(a),{expires:7}),localStorage.data=JSON.stringify(data)}}function pay(){$(".button").click(function(){var t=Number(/((\d|\.)+)/.exec($("#rmb").html())[1]).toFixed(2);$(".modal").find("h2").html("总计应付:".concat(t,"元"))})}$(".xuan").click(function(){var t=Number($(this).parent().parent().find(".num").html()),e=Number($(this).parent().parent().find("#sum").html()),a=/((\d|\.)+)/,n=Number(a.exec($("#good_num").html())[1]),r=Number(a.exec($("#rmb").html())[1]);this.checked?($("#good_num").html("已选"+(n+t)+"件商品"),$("#rmb").html("总计应付:<br>￥"+(r+e).toFixed(2)+"元")):($("#good_num").html("已选"+(n-t)+"件商品"),$("#rmb").html("总计应付:<br>￥"+(r-e).toFixed(2)+"元"))}),remove(),$("#rem").click(function(){for(var t=[],e=0;e<$(".xuan").size();e++)$(".xuan").eq(e)[0].checked&&t.push($(".xuan").eq(e).parent().parent().attr("order"));for(var a=0;a<t.length;a++){for(var n=0;n<$(".xuan").size();n++)t[a]==$(".xuan").eq(n).parent().parent().attr("order")&&$(".xuan").eq(n).parent().parent().remove();for(var r=0;r<data.length;r++)t[a]==data[r].order&&data.splice(r,1);localStorage.data=JSON.stringify(data)}}),pay();