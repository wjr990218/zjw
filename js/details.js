"use strict";$(".header").load("public.html header",function(){qwe(),$(".li2").on("click",function(){location.assign("shopcar.html")}),shopcart()});var arr2=[];$.get("data/datails.json",function(t){for(var e=localStorage.order,a="",i=0;i<t.length;i++)t[i]["条形码"]==e&&(arr2=t[i].img,a+="\n\t\t\t <ul>\n\t\t\t \t<li><p>".concat(t[i].name,'</p></li>\n\t\t\t \t<li class="price">￥<span>').concat(t[i].price.toFixed(2),'</span></li>\n\t\t\t \t<li>运费：￥0</li>\n\t\t\t \t<li>库存：有货</li>\n\t\t\t \t<li></li>\n\t\t\t \t<li>\n\t\t\t \t\t<div class="num">\n\t\t\t \t\t<div class="fuhao jia">+</div>\n\t\t\t \t\t<span>1</span>\n\t\t\t \t\t<div class="fuhao jian">-</div>\n\t\t\t \t</div>\n\t\t\t \t</li>\n\t\t\t \t<li><div class="shopc"><i></i>加入购物车</div></li>\n\t\t\t </ul>'));$(".shop").html(a)}).then(function(){function d(t,e){this.ele=t,this.eleWidth=this.ele.offsetWidth,this.eleHeight=this.ele.offsetHeight,this.url="",this.maskLayerWidth=e.maskLayerWidth||e.maskLayerHeight||180,this.maskLayerHeight=e.maskLayerHeight||e.maskLayerWidth||180,this.backgroundScaleX=this.eleWidth/this.maskLayerWidth,this.backgroundScaleY=this.eleHeight/this.maskLayerHeight,this.scaleX=e.scale?e.scale[0]||e.scale[1]:this.backgroundScaleX,this.scaleY=e.scale?e.scale[1]||e.scale[0]:this.backgroundScaleY,this.init()}d.prototype={constructor:d,init:function(){this.ele.style.backgroundSize="100% 100%"},createRelativeBox:function(){this.maskLayer=document.createElement("div"),this.maskLayer.style.cssText="position: absolute;border: 1px solid #ccc;background: rgba(255, 255, 255, .7);cursor: move;width:"+this.maskLayerWidth+"px;height:"+this.maskLayerHeight+"px;",this.ele.appendChild(this.maskLayer),this.asideBox=document.createElement("div"),this.asideBox.style.cssText="position:absolute;left:105%;top:50%;border:2px solid #ccc;transform:translateY(-50%);width:"+this.maskLayerWidth*this.scaleX+"px;height:"+this.maskLayerHeight*this.scaleY+"px;background-image:url("+this.url+");background-repeat:no-repeat;background-size:"+100*this.backgroundScaleX+"% "+100*this.backgroundScaleY+"%",this.ele.appendChild(this.asideBox)},calcPosition:function(t){var e=t.pageX-this.ele.offsetLeft-this.maskLayerWidth/2,a=t.pageY-this.ele.offsetTop-this.maskLayerHeight/2;e<0?e=0:e>this.eleWidth-this.maskLayerWidth&&(e=this.eleWidth-this.maskLayerWidth),a<0?a=0:a>this.eleHeight-this.maskLayerHeight&&(a=this.eleHeight-this.maskLayerHeight),this.maskLayer.style.left=e+"px",this.maskLayer.style.top=a+"px",this.asideBox.style.backgroundPosition=e*-this.scaleX+"px "+a*-this.scaleY+"px"}},window.Magnifier=d,function(){var t=document.querySelector("ul.small-img-ul"),e=document.querySelector("a.phone-display"),a=0,i=!0,s={big:arr2,small:arr2},n=[];s.small.forEach(function(t){n.push("<li class='img' style='background-image:url("+t+")'></li>")}),t.innerHTML=n.join("");var l=t.children,r=l[0].offsetWidth;function o(){Array.prototype.forEach.call(l,function(t,e){t.className="img"}),l[a].className+=" active",e.style.backgroundImage="url("+s.big[a]+")"}t.style.width=l.length*r+"px",o(),t.addEventListener("click",function(t){var e;e=t.target,a=Array.prototype.indexOf.call(l,e),o()});var h=new d(e,{maskLayerWidth:180,maskLayerHeight:240,scale:[2]});function c(t){i&&(h.url=s.big[a],h.createRelativeBox(),i=!1),h.calcPosition(t)}e.addEventListener("mouseenter",function(){this.addEventListener("mousemove",c,!1),this.addEventListener("mouseleave",function(){this.removeEventListener("mousemove",c),this.innerHTML="",i=!0},!1)},!1)}(),$(".jia").click(function(){$(".num span").html(parseInt($(".num span").html())+1)}),$(".jian").click(function(){"1"==$(".num span").html()?$(".num span").html(1):$(".num span").html(parseInt($(".num span").html())-1)}),$(".shopc").on("click",function(){var t={name:$(".shop p").html(),price:$(".price span").html(),order:localStorage.order,img:arr2[1],num:$(".num span").html()};localStorage.data||(localStorage.data="[]");for(var e=localStorage.data,e=JSON.parse(e),a=0,i=0;i<e.length;i++)e[i].order==t.order&&(e[i].num=parseInt(t.num)+parseInt(e[i].num),a=1,e=JSON.stringify(e),localStorage.data=e);0==a&&(e.push(t),e=JSON.stringify(e),localStorage.data=e),shopcart(),update()})});